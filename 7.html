<!DOCTYPE html>

<html>
<head>
<title> Find Median from Data Stream [theory task]</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
<link rel="icon" type="image/x-icon" href="shared/favicon.png">

<!-- UIkit CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/uikit@3.15.10/dist/css/uikit.min.css" />

<!-- UIkit JS -->
<script src="https://cdn.jsdelivr.net/npm/uikit@3.15.10/dist/js/uikit.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/uikit@3.15.10/dist/js/uikit-icons.min.js"></script>

<!-- highlight js -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.0.0/styles/default.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.0.0/highlight.min.js"></script>
<script>hljs.highlightAll();</script>
<link rel="stylesheet" href="stackoverflow-light.css">

<!-- highlight auto line wrap -->
<style>
pre, code {
    white-space: pre-wrap;
}
</style>

<!-- menu JS -->
<script>
document.addEventListener('DOMContentLoaded', function()
{ 
    const url = "menu.html"
    fetch(url)
   .then( r => r.text() )
   .then( t => document.getElementById("menu").innerHTML = t )
}, false);
</script>

</head>

<body class="uk-container"> 

<div id="menu"></div>

<article class="uk-article">
<h1<a class="uk-link-reset" href="">Find Median from Data Stream</a></h1>
<p class="uk-article-meta">Written by <a href="#">Ron</a> on 010111 April 000112011. Posted in <a href="#">Blog</a></p>

<pre><code class="text">
The median is the middle value in an ordered integer list. If the size of the list is even, there is no middle value, and the median is the mean of the two middle values.

For example, for arr = [2,3,4], the median is 3.
For example, for arr = [2,3], the median is (2 + 3) / 2 = 2.5.
Implement the MedianFinder class:

MedianFinder() initializes the MedianFinder object.
void addNum(int num) adds the integer num from the data stream to the data structure.
double findMedian() returns the median of all elements so far. Answers within 10-5 of the actual answer will be accepted.
</code></pre>

<pre><code>
Example 1:

Input
["MedianFinder", "addNum", "addNum", "findMedian", "addNum", "findMedian"]
[[], [1], [2], [], [3], []]
Output
[null, null, null, 1.5, null, 2.0]

Explanation
MedianFinder medianFinder = new MedianFinder();
medianFinder.addNum(1);    // arr = [1]
medianFinder.addNum(2);    // arr = [1, 2]
medianFinder.findMedian(); // return 1.5 (i.e., (1 + 2) / 2)
medianFinder.addNum(3);    // arr[1, 2, 3]
medianFinder.findMedian(); // return 2.0
</code></pre>

<pre><code class="python">
from bisect import bisect_left
import bisect
from heapq import heappush, heappushpop

class MedianFinder:

    def __init__(self):
        self._list = []

    def addNum(self, num: int) -> None:
        self._list.append(num)

    def findMedian(self) -> float:
        return median(self._list)

class MedianFinder:

    def __init__(self):
        self._list = []

    def addNum(self, num: int) -> None:
        idx = bisect_left(self._list, num)
        self._list.insert(idx, num)

    def findMedian(self) -> float:
        n = len(self._list)-1
        if n % 2 == 0:
            print(self._list[n//2])
        else:
            print((self._list[n//2] + self._list[n//2 + 1]) / 2.0)
            
class MedianFinder:

    def __init__(self):
        self.l = []

    def addNum(self, num: int) -> None:
        bisect.insort(self.l, num)

    def findMedian(self) -> float:
        n = len(self.l)-1
        if n % 2 == 0:
            print(self.l[n//2])
        else:
            print((self.l[n//2] + self.l[n//2 + 1]) / 2.0)
            
class MedianFinder:

    def __init__(self):
        self.greater = []
        self.smaller = []

    def addNum(self, num: int) -> None:
        if len(self.smaller) == len(self.greater):
            var = -heappushpop(self.greater, num)
            heappush(self.smaller, var)
        else:
            var = -heappushpop(self.smaller, -num)
            heappush(self.greater, var)
        
    def findMedian(self) -> float:
        if len(self.greater) == len(self.smaller):
            print((self.greater[0] - self.smaller[0]) / 2)
        else:
            print(-self.smaller[0])
            
obj = MedianFinder()
obj.addNum(1)
obj.addNum(2)
obj.findMedian()#1.5
obj.addNum(3)
obj.addNum(4)
obj.findMedian()#2.0
</code></pre>

</article>
</body>
</html>
